<div class="user-list-container">
  <div class="header">
    <h2>Liste des utilisateurs</h2>
    @if (!showForm()) {
      <button class="btn-add" (click)="onAddUser()">+ Ajouter un utilisateur</button>
    }
  </div>

  @if (showForm()) {
    <app-user-form
      [user]="editingUser()"
      (saved)="onFormSaved()"
      (cancelled)="onFormCancelled()"
    />
  }

  @if (loading()) {
    <div class="loading">Chargement...</div>
  }

  @if (error() && !showForm()) {
    <div class="error">{{ error() }}</div>
  }

  @if (!loading() && !error() && !showForm()) {
    @if (users().length === 0) {
      <div class="empty">Aucun utilisateur trouvÃ©</div>
    } @else {
      <ul class="user-list">
        @for (user of users(); track user.id) {
          <li class="user-item">
            <a [routerLink]="['/users', user.id]" class="user-link">
              <span class="user-name">{{ user.name }}</span>
              <span class="user-status" [class.active]="user.isActive" [class.inactive]="!user.isActive">
                {{ user.isActive ? 'Actif' : 'Inactif' }}
              </span>
              <span class="user-id">{{ user.id }}</span>
            </a>
            <div class="user-actions">
              <button class="btn-edit" (click)="onEditUser(user.id); $event.stopPropagation()" title="Modifier">
                âœï¸
              </button>
              <button class="btn-delete" (click)="onDeleteUser(user.id, user.name); $event.stopPropagation()" title="Supprimer">
                ğŸ—‘ï¸
              </button>
            </div>
          </li>
        }
      </ul>
    }
  }
</div>

